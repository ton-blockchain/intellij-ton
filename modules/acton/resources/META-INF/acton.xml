<idea-plugin>
    <depends>com.intellij.modules.json</depends>

    <extensionPoints>
        <extensionPoint qualifiedName="org.ton.intellij.acton.testConsolePropertiesProvider"
                        interface="org.ton.intellij.acton.runconfig.ActonTestConsolePropertiesProvider"
                        dynamic="true"/>
    </extensionPoints>

    <extensions defaultExtensionNs="com.intellij">
        <moduleType id="ACTON_MODULE" implementationClass="org.ton.intellij.acton.ide.newProject.ActonModuleType"/>
        <moduleBuilder builderClass="org.ton.intellij.acton.ide.newProject.ActonModuleBuilder"/>

        <directoryProjectGenerator implementation="org.ton.intellij.acton.ide.newProject.ActonProjectGenerator"/>
        <newProjectWizard.language implementation="org.ton.intellij.acton.ide.newProject.ActonNewProjectWizard"/>

        <configurationType implementation="org.ton.intellij.acton.runconfig.ActonCommandConfigurationType"/>
        <projectConfigurable instance="org.ton.intellij.acton.settings.ActonConfigurable"
                             parentId="language"
                             id="acton"
                             displayName="Acton"/>
        
        <psi.referenceContributor language="TOML"
                                  implementation="org.ton.intellij.acton.toml.ActonTomlReferenceContributor"/>
        <lang.findUsagesProvider language="TOML"
                                 implementationClass="org.ton.intellij.acton.toml.ActonTomlFindUsagesProvider"
                                 order="first"/>
        <useScopeEnlarger implementation="org.ton.intellij.acton.toml.ActonTomlUseScopeEnlarger"/>

        <notificationGroup id="Acton Update" displayType="BALLOON"/>
        <postStartupActivity implementation="org.ton.intellij.acton.ide.ActonUpdateActivity"/>

        <consoleFilterProvider implementation="org.ton.intellij.acton.ide.ActonConsoleFilterProvider"/>

        <toolWindow id="Acton Wallets"
                    secondary="true"
                    icon="com.intellij.icons.AllIcons.General.User"
                    anchor="right"
                    factoryClass="org.ton.intellij.acton.ide.ActonWalletToolWindowFactory"/>
    </extensions>

    <extensions defaultExtensionNs="JavaScript">
        <JsonSchema.ProviderFactory implementation="org.ton.intellij.acton.toml.ActonTomlJsonSchemaProviderFactory"/>
    </extensions>
</idea-plugin>
